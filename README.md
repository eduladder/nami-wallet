# heaphub

The heaphub project seeks to repurpose the Eclipse Foundation's open source tool JIFA (Java Issue Finder Assistant) in order to provide an internal heap dump analysis tool. JIFA provides a REST API layer to interact and conduct heap dump analysis. For ease of development, heaphub has built an additional internal layer of this level to call custom heap dump analysis routes and to store this data in a SQL like database.

The heaphub section of the project is split into 4 main files: route, collect, common and util. Route provides a base class and examples for how to create custom routes. The common folder contains access to the database manager for the SQL database. The util folder provies additional classes to assist in processing heap dumps.

The collect folder contains the bulk of the project. It is split into two folders. Collectors and models. Collectors are built to collect the information for ~1 metric of the datatype. Collectors call the JIFA API to collect the metric and then upload this metric to the SQL database. The models routes defines intermediary data models for the collected metrics to assist in the process of SQL upload. The CollectAll class (backend/worker/src/main/java/com/salesforce/cpp/heaphub/collect/collectors/CollectAll.java) is the main entry point for the heaphub project. It collects every metric outlined as a requirement for a specific heap dump. It is connected to a modified version of the upload by URL route in FileRoute.java (backend/worker/src/main/java/org/eclipse/jifa/worker/route/FileRoute.java). This allows a user to simply copy and paste a warden gzip heap dump link into the UI and click upload in order to upload and collect all data for that heap dump. CollectAll is also connected to the route in the HeapHubCollectRoutes.java file (backend/worker/src/main/java/com/salesforce/cpp/heaphub/route/HeapHubCollectRoutes.java). This allows developers to collect information on an already uploaded heap dump.